({156:function(){var e,t,n,r,i,s,a,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{o(r.next(e))}catch(e){s(e)}}function u(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}o((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(o){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}},c=function(e,t){this.available=!1,this.element=e,this.obj=t},l=function(){function e(e){this.highlights=[],this.contexts=[],this.element=e}return e.prototype.clear=function(){for(;this.element.firstChild;)this.element.lastChild.remove();this.contexts=[],this.highlights=[]},e.prototype.print=function(e,t){return void 0===t&&(t=.02),u(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(a){switch(a.label){case 0:n=0,r=0,a.label=1;case 1:return r<e.length?(i=n,[4,A()]):[3,3];case 2:for(n=i+a.sent();r<e.length&&n>t;)"\n"==(s=e.charAt(r))?this.element.appendChild(document.createElement("br")):this.element.append(s),r++,n-=t;return[3,1];case 3:return[2]}}))}))},e.prototype.add=function(t){var n=new e(t);return this.contexts.push(n),this.element.appendChild(t),n},e.prototype.italic=function(){return this.add(document.createElement("i"))},e.prototype.color=function(e){var t=document.createElement("span");return t.style.color=e,this.add(t)},e.prototype.section=function(){return this.add(document.createElement("span"))},e.prototype.block=function(e){var t=document.createElement("div");return t.style.minHeight=e.toString()+"px",this.add(t)},e}(),h=function(e,t,n){this.recipe=e,this.isRecipeOrdered=t,this.fn=n},p=[],f=[],d=!1,y=[],g=new l(document.getElementById("terminal")),b=[],v=[],m={},w=!1,k={},Y=!1,x={},I={},T={},E={},j={};function A(){return new Promise((function(e){p.push(e)}))}function L(e){return u(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<e?(n=t,[4,A()]):[3,3];case 2:return t=n+r.sent(),[3,1];case 3:return[2,t]}}))}))}function N(){t=0,n=null,e=[];for(var r=0;r<v.length;r++){var i=!0;if(v[r].isRecipeOrdered){if(b.length>v[r].recipe.length)i=!1;else for(var s=0;s<b.length;s++)if(v[r].recipe[s]!=b[s]){i=!1;break}i&&e.push(v[r].recipe[b.length])}else{for(s=0;s<b.length;s++)if(!v[r].recipe.includes(b[s])){i=!1;break}if(i)for(s=0;s<v[r].recipe.length;s++)b.includes(v[r].recipe[s])||e.push(v[r].recipe[s])}i&&(t+=1,b.length==v[r].recipe.length&&(n=v[r]))}}function S(r,i){var s=document.createElement("span");s.classList.add("object-text");var a=new c(s,i);return r.highlights.push(a),s.addEventListener("click",(function(r){if(r.stopImmediatePropagation(),b.includes(i)){if(n){var s=n.fn;b=[],N(),s(),W(g)}}else e.includes(i)&&(b.push(i),N(),n&&1==t&&(s=n.fn,b=[],N(),s()),W(g))})),q(a),r.add(s)}function C(e){var t=v.indexOf(e);t>=0&&(v.splice(t,1),G())}function O(){v=[],G()}function P(e,t,n,r){var i=new h(e,t,null);return i.fn=function(){r(),n&&C(i)},v.push(i),G(),i}function _(e,t,n){void 0===n&&(n=!0);var r=Object();return P([r],!1,n,t),S(e,r)}function F(e,t){return void 0===t&&(t=!1),new Promise((function(n){P(e,t,!0,n)}))}function q(t){e||N(),t.element.classList.remove("available","selected","completable"),t.available=!1,b.includes(t.obj)?n?t.element.classList.add("completable"):t.element.classList.add("selected"):e.includes(t.obj)&&(t.element.classList.add("available"),t.available=!0)}function W(e){for(var t=0;t<e.highlights.length;t++)q(e.highlights[t]);for(t=0;t<e.contexts.length;t++)W(e.contexts[t])}function G(){N(),W(g)}function R(){return u(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return s=!1,i.clear(),[4,i.print("In front of you is a ")];case 1:return e.sent(),[4,S(i,I).print("narrow passage")];case 2:return e.sent(),[4,i.print(" leading down deeper into the cave.\n")];case 3:return e.sent(),[4,i.print("To your left is a ")];case 4:return e.sent(),[4,S(i,T).print("larger passage")];case 5:return e.sent(),[4,i.print(" that appears to curve away from the main chamber.\n")];case 6:return e.sent(),[4,i.print("To your right is a ")];case 7:return e.sent(),[4,S(i,E).print("pile of rocks")];case 8:return e.sent(),[4,i.print(" sitting against the wall of the cave.\n")];case 9:return e.sent(),[2]}}))}))}function V(){return u(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return r.clear(),[4,r.print("You are carrying some extra rope")];case 1:return e.sent(),w?[4,r.print(", a ")]:[3,12];case 2:return e.sent(),[4,S(r,m).print("lighter")];case 3:return e.sent(),Y?[4,r.print(", a ")]:[3,8];case 4:return e.sent(),[4,S(r,k).print("bottle of hairspray")];case 5:return e.sent(),[4,r.print(", and a ")];case 6:return e.sent(),[4,S(r,x).print("key")];case 7:return e.sent(),[3,11];case 8:return[4,r.print(", and a ")];case 9:return e.sent(),[4,S(r,k).print("bottle of hairspray")];case 10:e.sent(),e.label=11;case 11:return[3,15];case 12:return[4,r.print(" and a ")];case 13:return e.sent(),[4,S(r,m).print("lighter")];case 14:e.sent(),e.label=15;case 15:return[4,r.print(".")];case 16:return e.sent(),[2]}}))}))}function B(){return u(this,void 0,void 0,(function(){var e,t,n,c,l,h,p,f=this;return o(this,(function(d){switch(d.label){case 0:return O(),s=!1,a=!1,w=!1,Y=!1,P([m,E],!0,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nYou shine your lighter towards the pile of rocks.\n")];case 1:return e.sent(),w?[3,6]:[4,i.print("A shiny object, illuminated by your lighter, catches your eye. ")];case 2:return e.sent(),[4,i.print("A ")];case 3:return e.sent(),[4,S(i,k).print("bottle of hairspray")];case 4:return e.sent(),[4,i.print(" is sitting on the ground by the rocks.\n")];case 5:e.sent(),e.label=6;case 6:return[2]}}))}))})),P([m,I],!0,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nYou shine your lighter towards the ")];case 1:return e.sent(),[4,S(i,I).print("narrow passage")];case 2:return e.sent(),[4,i.print(".\nYou see thick spiderwebs crawling with hundreds of enormous spiders.\n")];case 3:return e.sent(),[2]}}))}))})),P([m,T],!0,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nYou shine your lighter towards the ")];case 1:return e.sent(),[4,S(i,T).print("larger passage")];case 2:return e.sent(),[4,i.print(".\nYou see an iron grate which appears to be locked.\n")];case 3:return e.sent(),[2]}}))}))})),P([m,k],!0,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nA jet of fire shoots from the ")];case 1:return e.sent(),[4,S(i,k).print("hairspray")];case 2:return e.sent(),[4,i.print(" lighting up the room around you.\n")];case 3:return e.sent(),!s||a?[3,11]:(a=!0,[4,i.print("The spiderwebs burn and fall to ground around you, allowing you to escape.\n")]);case 4:return e.sent(),[4,i.print("You can still see the ")];case 5:return e.sent(),[4,_(i,(function(){return R()})).print("main chamber")];case 6:return e.sent(),[4,i.print(" of the cave behind you.\n")];case 7:return e.sent(),[4,i.print("You eventually reach a dead end, but on the ground you find a ")];case 8:return e.sent(),[4,S(i,x).print("key")];case 9:return e.sent(),[4,i.print(".\n")];case 10:e.sent(),e.label=11;case 11:return[2]}}))}))})),P([x],!1,!0,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nYou pick up the key.\n")];case 1:return e.sent(),Y=!0,V(),[2]}}))}))})),P([k],!1,!0,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.print("\nYou pick up the bottle of hairspray.\n")];case 1:return e.sent(),w=!0,V(),[2]}}))}))})),P([I],!1,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return i.clear(),s=!0,[4,i.print("You decend into the narrow passageway.\n")];case 1:return e.sent(),a?[3,3]:[4,i.print("You can feel the spiders on your skin. You need to act fast or else one might bite you!\n")];case 2:return e.sent(),[3,10];case 3:return[4,i.print("You can still see the ")];case 4:return e.sent(),[4,_(i,(function(){return R()})).print("main chamber")];case 5:return e.sent(),[4,i.print(" of the cave behind you.\n")];case 6:return e.sent(),Y?[3,10]:[4,i.print("You eventually reach a dead end, but on the ground you find a ")];case 7:return e.sent(),[4,S(i,x).print("key")];case 8:return e.sent(),[4,i.print(".\n")];case 9:e.sent(),e.label=10;case 10:return[2]}}))}))})),P([T],!1,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return i.clear(),[4,i.print("You decend into the larger passageway until you reach a ")];case 1:return e.sent(),[4,S(i,j).print("locked iron grate")];case 2:return e.sent(),[4,i.print(".\nThe ")];case 3:return e.sent(),[4,_(i,(function(){return R()})).print("main chamber")];case 4:return e.sent(),[4,i.print(" of the cave is behind you.")];case 5:return e.sent(),[2]}}))}))})),P([j,x],!0,!1,(function(){return u(f,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return i.clear(),[4,i.print("The key unlocks the iron grate.\n")];case 1:return e.sent(),[4,i.print("You follow the passageway around a corner when suddenly you see daylight!\n")];case 2:return e.sent(),[4,i.print("You have escaped and can finally return ")];case 3:return e.sent(),[4,_(i,(function(){return H()})).print("home")];case 4:return e.sent(),[4,i.print(".")];case 5:return e.sent(),[2]}}))}))})),g.clear(),[4,(e=g.section()).print("You sit in a cave like life.\n\n")];case 1:case 7:case 9:case 16:return d.sent(),[4,L(1)];case 2:return d.sent(),[4,e.print("Caves really can be a lot like life")];case 3:return d.sent(),[4,L(.5)];case 4:return d.sent(),[4,e.print(", at least in the sense that there's often multiple routes you can take")];case 5:return d.sent(),[4,L(1.5)];case 6:return d.sent(),[4,e.print(", and you could die.\n\n")];case 8:return d.sent(),[4,e.print("These are the things you think about as stare down into the narrow, dark passage that leads into the ground in front of you.\n\n")];case 10:return d.sent(),r=g.block(50),[4,V()];case 11:return d.sent(),i=g.section(),n=F([t={}]),[4,i.print("The chamber of the cave where you sit is dimly lit by the light streaming in from the ")];case 12:return d.sent(),[4,S(i,t).print("opening")];case 13:return d.sent(),[4,i.print(" behind you.")];case 14:return d.sent(),[4,n];case 15:return d.sent(),[4,i.print("\n\nIt's right there.")];case 17:return d.sent(),[4,i.print(" You could totally just ")];case 18:return d.sent(),l=P([c={}],!1,!0,(function(){return H()})),[4,S(i,c).print("leave")];case 19:return d.sent(),[4,i.print(", but you won't. No, you'll sit here thinking about how afraid you are until you ")];case 20:return d.sent(),p=F([h={}]),[4,S(i,h).print("go anyway")];case 21:return d.sent(),[4,i.print(".")];case 22:return d.sent(),[4,p];case 23:return d.sent(),C(l),e.clear(),R(),[2]}}))}))}function H(){return u(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return O(),g.clear(),[4,g.color("orange").print("A Cave like Life\n\n")];case 1:return e.sent(),[4,g.print("Would you like a ")];case 2:return e.sent(),[4,_(g,(function(){return function(){return u(this,void 0,void 0,(function(){var e,t,n,r,i,s;return o(this,(function(a){switch(a.label){case 0:return O(),g.clear(),[4,g.print("Welcome to a quick tutorial.\n\n")];case 1:return a.sent(),[4,g.print("When you feel that you have seen enough, you can go back to the ")];case 2:return a.sent(),_(g,(function(){return H()})).print("main menu"),[4,g.print(".\n\n")];case 3:case 5:case 11:return a.sent(),[4,L(1)];case 4:return a.sent(),[4,g.print("I will now teach you important things with little to no context.\n")];case 6:return a.sent(),t=F([e={}]),[4,g.print("As you may know, when you see text that looks like ")];case 7:return a.sent(),[4,S(g,e).print("this")];case 8:return a.sent(),[4,g.print(", it means you can click on it...\n")];case 9:case 18:case 24:return a.sent(),[4,t];case 10:return a.sent(),[4,g.print("...and that means you can't anymore.\n\n")];case 12:return a.sent(),t=F([n={},r={}]),[4,g.print("Sometimes you need to ")];case 13:return a.sent(),[4,S(g,n).print("select")];case 14:return a.sent(),[4,g.print(" multiple ")];case 15:return a.sent(),[4,S(g,r).print("highlights")];case 16:return a.sent(),[4,g.print(" to complete an action.\n")];case 17:return a.sent(),[4,g.print("(to cancel a selection, click anywhere outside of the highlights)\n\n")];case 19:return a.sent(),t=F([i={},s={}],!0),[4,g.print("Sometimes you need to select ")];case 20:return a.sent(),[4,S(g,i).print("one highlight")];case 21:return a.sent(),[4,g.print(" before ")];case 22:return a.sent(),[4,S(g,s).print("another")];case 23:return a.sent(),[4,g.print(" becomes visible.\n\n")];case 25:return a.sent(),[4,g.print("That's about all you need to know to ")];case 26:return a.sent(),[4,_(g,(function(){return B()})).print("play the game")];case 27:return a.sent(),[4,g.print(". Good luck!")];case 28:return a.sent(),[2]}}))}))}()})).print("quick tutorial")];case 3:return e.sent(),[4,g.print(" or are you ready to ")];case 4:return e.sent(),[4,_(g,(function(){return B()})).print("play")];case 5:return e.sent(),[4,g.print("?\n\n(click the highlighted text to select an option)")];case 6:return e.sent(),[2]}}))}))}function z(e){var t=f;for(f=p,p=t;f.length>0;)f.pop()(e)}function D(e){if(requestAnimationFrame((function(e){return D()})),d){for(console.log("Fast forwarding "+p.length);p.length>0;)z(Number.POSITIVE_INFINITY);for(d=!1;y.length>0;)y.pop()()}else z(Number.POSITIVE_INFINITY)}document.addEventListener("click",(function(e){b.length>0&&(b=[],N(),W(g))})),requestAnimationFrame((function(e){return D()})),H()}})[156]();